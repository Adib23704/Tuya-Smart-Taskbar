<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
			rel="stylesheet"
		/>
		<title>About</title>
		<style>
			:root {
				--bg-primary: #f8fafc;
				--bg-secondary: #ffffff;
				--bg-tertiary: #f1f5f9;
				--text-primary: #0f172a;
				--text-secondary: #475569;
				--text-muted: #94a3b8;
				--border-color: #e2e8f0;
				--border-focus: #3b82f6;
				--accent: #3b82f6;
				--accent-hover: #2563eb;
				--accent-light: rgba(59, 130, 246, 0.1);
				--success: #10b981;
				--success-hover: #059669;
				--error: #ef4444;
				--error-light: rgba(239, 68, 68, 0.1);
				--shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
				--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
				--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
				--radius-sm: 6px;
				--radius-md: 10px;
				--radius-lg: 16px;
				--transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
			}

			[data-theme="dark"] {
				--bg-primary: #0f172a;
				--bg-secondary: #1e293b;
				--bg-tertiary: #334155;
				--text-primary: #f1f5f9;
				--text-secondary: #cbd5e1;
				--text-muted: #64748b;
				--border-color: #334155;
				--border-focus: #60a5fa;
				--accent: #60a5fa;
				--accent-hover: #3b82f6;
				--accent-light: rgba(96, 165, 250, 0.15);
				--success: #34d399;
				--success-hover: #10b981;
				--error: #f87171;
				--error-light: rgba(248, 113, 113, 0.15);
				--shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
				--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -2px rgba(0, 0, 0, 0.3);
				--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -4px rgba(0, 0, 0, 0.3);
			}

			* {
				box-sizing: border-box;
				margin: 0;
				padding: 0;
			}

			body {
				font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
				background-color: var(--bg-primary);
				min-height: 100vh;
				color: var(--text-primary);
				transition: background-color var(--transition), color var(--transition);
			}

			/* Custom Scrollbar */
			::-webkit-scrollbar {
				width: 8px;
			}
			::-webkit-scrollbar-track {
				background: var(--bg-tertiary);
			}
			::-webkit-scrollbar-thumb {
				background: var(--text-muted);
				border-radius: 4px;
			}
			::-webkit-scrollbar-thumb:hover {
				background: var(--text-secondary);
			}

			.container {
				width: 100%;
				max-width: 420px;
				margin: 0 auto;
				padding: 20px;
			}

			/* Header with Logo */
			.header {
				text-align: center;
				margin-bottom: 20px;
			}

			.logo {
				width: 56px;
				height: 56px;
				margin: 0 auto 12px;
				background: linear-gradient(135deg, var(--accent) 0%, #8b5cf6 100%);
				border-radius: var(--radius-md);
				display: flex;
				align-items: center;
				justify-content: center;
				box-shadow: var(--shadow-lg);
				animation: logoFloat 3s ease-in-out infinite;
			}

			@keyframes logoFloat {
				0%, 100% { transform: translateY(0); }
				50% { transform: translateY(-4px); }
			}

			.logo svg {
				width: 30px;
				height: 30px;
				fill: white;
			}

			.header h1 {
				font-size: 1.25rem;
				font-weight: 600;
				color: var(--text-primary);
				margin-bottom: 6px;
			}

			.version-container {
				display: flex;
				align-items: center;
				justify-content: center;
				gap: 8px;
			}

			.version-badge {
				display: inline-flex;
				align-items: center;
				gap: 6px;
				padding: 4px 12px;
				background: var(--accent-light);
				color: var(--accent);
				border-radius: 20px;
				font-weight: 600;
				font-size: 0.875rem;
			}

			/* Card Container */
			.card {
				background: var(--bg-secondary);
				border-radius: var(--radius-lg);
				padding: 18px;
				box-shadow: var(--shadow-md);
				border: 1px solid var(--border-color);
				transition: box-shadow var(--transition), border-color var(--transition), background-color var(--transition);
			}

			.card:hover {
				box-shadow: var(--shadow-lg);
			}

			/* Info Sections */
			.info-section {
				padding: 12px 0;
				border-bottom: 1px solid var(--border-color);
			}

			.info-section:last-of-type {
				border-bottom: none;
				padding-bottom: 4px;
			}

			.info-section:first-of-type {
				padding-top: 0;
			}

			.info-label {
				font-size: 0.7rem;
				font-weight: 600;
				color: var(--text-muted);
				text-transform: uppercase;
				letter-spacing: 0.5px;
				margin-bottom: 6px;
			}

			.info-content {
				font-size: 0.875rem;
				color: var(--text-primary);
				line-height: 1.5;
			}

			.info-content a {
				color: var(--accent);
				text-decoration: none;
				font-weight: 500;
				transition: color var(--transition);
				cursor: pointer;
				display: inline-flex;
				align-items: center;
				gap: 4px;
			}

			.info-content a:hover {
				color: var(--accent-hover);
			}

			.info-content a svg {
				width: 14px;
				height: 14px;
				opacity: 0;
				transform: translateX(-4px);
				transition: all var(--transition);
			}

			.info-content a:hover svg {
				opacity: 1;
				transform: translateX(0);
			}

			/* Developer Section */
			.developer-info {
				display: flex;
				align-items: center;
				gap: 10px;
			}

			.developer-avatar {
				width: 38px;
				height: 38px;
				background: linear-gradient(135deg, var(--accent) 0%, #8b5cf6 100%);
				border-radius: 50%;
				display: flex;
				align-items: center;
				justify-content: center;
				font-weight: 600;
				font-size: 0.9375rem;
				color: white;
				flex-shrink: 0;
			}

			.developer-details {
				flex: 1;
			}

			.developer-name {
				font-weight: 600;
				color: var(--text-primary);
				margin-bottom: 2px;
			}

			.developer-handle {
				font-size: 0.875rem;
				color: var(--text-muted);
			}

			/* Links Section */
			.links-grid {
				display: grid;
				grid-template-columns: 1fr 1fr;
				gap: 8px;
			}

			.link-item {
				display: flex;
				align-items: center;
				gap: 8px;
				padding: 10px 12px;
				background: var(--bg-tertiary);
				border-radius: var(--radius-sm);
				cursor: pointer;
				transition: all var(--transition);
				border: 1px solid transparent;
			}

			.link-item:hover {
				background: var(--accent-light);
				border-color: var(--accent);
			}

			.link-icon {
				width: 28px;
				height: 28px;
				background: var(--bg-secondary);
				border-radius: var(--radius-sm);
				display: flex;
				align-items: center;
				justify-content: center;
				transition: all var(--transition);
			}

			.link-item:hover .link-icon {
				background: var(--accent);
			}

			.link-icon svg {
				width: 16px;
				height: 16px;
				color: var(--text-secondary);
				transition: color var(--transition);
			}

			.link-item:hover .link-icon svg {
				color: white;
			}

			.link-text {
				font-size: 0.875rem;
				font-weight: 500;
				color: var(--text-primary);
			}

			/* Button */
			.button-group {
				margin-top: 16px;
			}

			button {
				width: 100%;
				padding: 12px 16px;
				font-size: 0.9375rem;
				font-family: inherit;
				font-weight: 600;
				border: none;
				border-radius: var(--radius-sm);
				cursor: pointer;
				transition: all var(--transition);
				display: flex;
				align-items: center;
				justify-content: center;
				gap: 10px;
			}

			button:active:not(:disabled) {
				transform: scale(0.98);
			}

			button svg {
				width: 20px;
				height: 20px;
			}

			.update-btn {
				background: linear-gradient(135deg, var(--accent) 0%, #8b5cf6 100%);
				color: white;
				box-shadow: var(--shadow-md);
			}

			.update-btn:hover:not(:disabled) {
				box-shadow: var(--shadow-lg);
				transform: translateY(-1px);
			}

			button:disabled {
				opacity: 0.7;
				cursor: not-allowed;
				transform: none !important;
			}

			button.success {
				background: var(--success) !important;
			}

			button.error {
				background: var(--error) !important;
			}

			button.has-update {
				background: linear-gradient(135deg, var(--success) 0%, #059669 100%) !important;
				animation: pulse 2s infinite;
			}

			@keyframes pulse {
				0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4); }
				50% { box-shadow: 0 0 0 8px rgba(16, 185, 129, 0); }
			}

			/* Loading Spinner */
			.spinner {
				width: 20px;
				height: 20px;
				border: 2px solid transparent;
				border-top-color: currentColor;
				border-radius: 50%;
				animation: spin 0.8s linear infinite;
			}

			@keyframes spin {
				to { transform: rotate(360deg); }
			}

			/* Footer */
			.footer {
				margin-top: 14px;
				text-align: center;
				font-size: 0.7rem;
				color: var(--text-muted);
			}

			.footer a {
				color: var(--text-muted);
				text-decoration: none;
				transition: color var(--transition);
			}

			.footer a:hover {
				color: var(--accent);
			}
		</style>
	</head>
	<body>
		<div class="container">
			<div class="header">
				<div class="logo">
					<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
						<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
					</svg>
				</div>
				<h1>Tuya Smart Taskbar</h1>
				<div class="version-container">
					<span class="version-badge">
						<span id="appVersion">0.0.0</span>
					</span>
				</div>
			</div>

			<div class="card">
				<div class="info-section">
					<div class="info-label">Developer</div>
					<div class="developer-info">
						<div class="developer-avatar">ZA</div>
						<div class="developer-details">
							<div class="developer-name">Zahin A. Adib</div>
							<div class="developer-handle">@Adib23704</div>
						</div>
					</div>
				</div>

				<div class="info-section">
					<div class="info-label">Description</div>
					<div class="info-content">
						Control your Tuya smart home devices directly from the Windows taskbar.
						Fast, lightweight, and always accessible.
					</div>
				</div>

				<div class="info-section">
					<div class="info-label">Links</div>
					<div class="links-grid">
						<div class="link-item" id="githubLink">
							<div class="link-icon">
								<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
									<path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
								</svg>
							</div>
							<span class="link-text">GitHub</span>
						</div>
						<div class="link-item" id="websiteLink">
							<div class="link-icon">
								<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
									<circle cx="12" cy="12" r="10"></circle>
									<line x1="2" y1="12" x2="22" y2="12"></line>
									<path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
								</svg>
							</div>
							<span class="link-text">Website</span>
						</div>
					</div>
				</div>

				<div class="button-group">
					<button id="check-update-btn" type="button" class="update-btn">
						<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
							<path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
							<path d="M3 3v5h5"></path>
							<path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path>
							<path d="M16 16h5v5"></path>
						</svg>
						<span>Check for Updates</span>
					</button>
				</div>
			</div>

			<div class="footer">
				Made with care for the smart home community
			</div>
		</div>
		<script>
			const { invoke } = window.__TAURI__.core;

			const appVersionEl = document.getElementById('appVersion');
			const checkUpdateBtn = document.getElementById('check-update-btn');
			const githubLink = document.getElementById('githubLink');
			const websiteLink = document.getElementById('websiteLink');

			function detectTheme() {
				if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
					document.documentElement.setAttribute('data-theme', 'dark');
				} else {
					document.documentElement.removeAttribute('data-theme');
				}
			}

			window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', detectTheme);

			async function openExternalLink(url) {
				try {
					await invoke('open_external', { url });
				} catch (error) {
					console.error('Failed to open link:', error);
				}
			}

			function setButtonState(state, text, hasUpdate = false) {
				const span = checkUpdateBtn.querySelector('span');
				const svg = checkUpdateBtn.querySelector('svg:not(.spinner)');

				checkUpdateBtn.classList.remove('success', 'error', 'has-update');

				if (state === 'loading') {
					checkUpdateBtn.disabled = true;
					if (svg) svg.style.display = 'none';
					if (!checkUpdateBtn.querySelector('.spinner')) {
						const spinner = document.createElement('div');
						spinner.className = 'spinner';
						checkUpdateBtn.insertBefore(spinner, span);
					}
					span.textContent = text;
				} else {
					checkUpdateBtn.disabled = false;
					if (svg) svg.style.display = 'block';
					const spinner = checkUpdateBtn.querySelector('.spinner');
					if (spinner) spinner.remove();
					span.textContent = text;

					if (state === 'success') checkUpdateBtn.classList.add('success');
					if (state === 'error') checkUpdateBtn.classList.add('error');
					if (hasUpdate) checkUpdateBtn.classList.add('has-update');
				}
			}

			async function checkForUpdate() {
				setButtonState('loading', 'Checking...');

				try {
					const info = await invoke('check_for_update');

					if (info.available) {
						setButtonState('normal', `Update to v${info.latestVersion}`, true);

						checkUpdateBtn.onclick = async () => {
							await openExternalLink(info.downloadUrl);
						};
					} else {
						setButtonState('success', 'Up to Date!');

						setTimeout(() => {
							setButtonState('normal', 'Check for Updates');
							checkUpdateBtn.onclick = checkForUpdate;
						}, 3000);
					}
				} catch (error) {
					console.error('Failed to check for update:', error);
					setButtonState('error', 'Check Failed');

					setTimeout(() => {
						setButtonState('normal', 'Check for Updates');
					}, 3000);
				}
			}

			async function init() {
				detectTheme();

				try {
					const version = await invoke('get_version');
					appVersionEl.textContent = `v${version}`;
				} catch (error) {
					console.error('Failed to get version:', error);
				}

				checkUpdateBtn.addEventListener('click', checkForUpdate);
				githubLink.addEventListener('click', () => openExternalLink('https://github.com/Adib23704/Tuya-Smart-Taskbar'));
				websiteLink.addEventListener('click', () => openExternalLink('https://www.adibdev.me'));
			}

			if (document.readyState === 'loading') {
				document.addEventListener('DOMContentLoaded', init);
			} else {
				init();
			}
		</script>
	</body>
</html>
